<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ecocalculadora - Dashboard de Proyectos</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    :root {
      --primary-color: #1a7d52;
      --primary-dark: #0c4e34;
      --primary-light: #28a745;
      --secondary-color: #f8f9fa;
      --text-color: #333;
      --text-light: #777;
      --border-color: #e0e0e0;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    body {
      background-color: #f5f7f9;
      color: var(--text-color);
      min-height: 100vh;
    }
    
    /* Header y Navegación */
    .header {
      background: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .logo {
      display: flex;
      align-items: center;
    }
    
    .logo h1 {
      color: var(--primary-color);
      font-size: 24px;
      margin-left: 10px;
    }
    
    .logo span {
      color: var(--primary-dark);
      font-weight: 700;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--secondary-color);
      padding: 8px 15px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .user-profile:hover {
      background: #e9ecef;
    }
    
    .user-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: var(--primary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .logout-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .logout-btn:hover {
      background: var(--primary-dark);
    }
    
    /* Contenido Principal */
    .main-container {
      display: flex;
      min-height: calc(100vh - 70px);
    }
    
    /* Sidebar de Categorías */
    .sidebar {
      width: 280px;
      background: white;
      padding: 25px 0;
      box-shadow: var(--card-shadow);
      height: calc(100vh - 70px);
      position: sticky;
      top: 70px;
      overflow-y: auto;
    }
    
    .category-title {
      padding: 0 25px 15px;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-dark);
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 15px;
    }
    
    .category-list {
      list-style: none;
    }
    
    .category-item {
      padding: 12px 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid transparent;
    }
    
    .category-item:hover {
      background: #f1f9f5;
    }
    
    .category-item.active {
      background: #e6f7ef;
      border-left-color: var(--primary-color);
      color: var(--primary-dark);
      font-weight: 500;
    }
    
    .category-item i {
      color: var(--primary-color);
      font-size: 18px;
      width: 24px;
    }
    
    /* Panel de Proyectos */
    .projects-panel {
      flex: 1;
      padding: 30px;
    }
    
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .panel-title {
      font-size: 24px;
      color: var(--primary-dark);
    }
    
    .search-box {
      display: flex;
      align-items: center;
      background: white;
      border-radius: 8px;
      padding: 8px 15px;
      box-shadow: var(--card-shadow);
      width: 300px;
    }
    
    .search-box i {
      color: var(--text-light);
      margin-right: 10px;
    }
    
    .search-box input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 15px;
    }
    
    /* Filtros */
    .filters {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    
    .filter-item {
      background: white;
      padding: 8px 15px;
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .filter-item.active {
      background: var(--primary-color);
      color: white;
    }
    
    .filter-item.active i {
      color: white;
    }
    
    /* Grid de Proyectos */
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 25px;
    }
    
    .project-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .project-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }
    
    .card-header {
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .project-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 5px;
      color: var(--primary-dark);
    }
    
    .project-category {
      display: inline-block;
      background: #e6f7ef;
      color: var(--primary-color);
      padding: 4px 10px;
      border-radius: 50px;
      font-size: 12px;
      font-weight: 500;
    }
    
    .card-body {
      padding: 20px;
    }
    
    .project-detail {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .detail-label {
      color: var(--text-light);
      font-size: 14px;
    }
    
    .detail-value {
      font-weight: 500;
      text-align: right;
      max-width: 60%;
      word-break: break-word;
    }
    
    .priority-high {
      color: #dc3545;
      font-weight: 600;
    }
    
    .priority-medium {
      color: #fd7e14;
      font-weight: 600;
    }
    
    .priority-low {
      color: #20c997;
      font-weight: 600;
    }
    
    .progress-bar {
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      margin: 15px 0;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--primary-color);
      border-radius: 4px;
      width: 0%;
      transition: width 1s ease;
    }
    
    .card-footer {
      padding: 15px 20px;
      background: #f8f9fa;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .view-details {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
    }
    
    .view-details:hover {
      color: var(--primary-dark);
    }
    
    .project-status {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 50px;
      font-weight: 500;
    }
    
    .status-existing {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    .status-new {
      background: #d4edda;
      color: #155724;
    }
    
    .status-evaluation {
      background: #fff3cd;
      color: #856404;
    }
    
    .status-priority {
      background: #f8d7da;
      color: #721c24;
    }
    
    .status-completed {
      background: #e2e3e5;
      color: #383d41;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
      .projects-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }
    
    @media (max-width: 900px) {
      .main-container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        position: static;
      }
      
      .category-list {
        display: flex;
        overflow-x: auto;
        padding-bottom: 10px;
      }
      
      .category-item {
        border-left: none;
        border-bottom: 3px solid transparent;
        white-space: nowrap;
      }
      
      .category-item.active {
        border-left: none;
        border-bottom-color: var(--primary-color);
      }
    }
    
    @media (max-width: 768px) {
      .header {
        padding: 15px;
        flex-direction: column;
        gap: 15px;
      }
      
      .panel-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .search-box {
        width: 100%;
      }
      
      .projects-panel {
        padding: 20px 15px;
      }
    }
    
    /* Animaciones */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .project-card {
      animation: fadeIn 0.5s ease-out;
    }
  </style>
</head>
<body>
  <!-- Header con información de usuario -->
  <header class="header">
    <div class="logo">
      <i class="fas fa-leaf fa-2x" style="color: #1a7d52;"></i>
      <h1>ECO<span>CALCULADORA</span></h1>
    </div>
    
    <div class="user-info">
      <div class="user-profile">
        <div class="user-avatar">U</div>
        <span id="username-display">Usuario</span>
      </div>
      <button class="logout-btn" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i> Cerrar sesión
      </button>
    </div>
  </header>
  
  <div class="main-container">
    <!-- Sidebar de categorías -->
    <aside class="sidebar">
      <h2 class="category-title">Categorías de Proyectos</h2>
      <ul class="category-list">
        <li class="category-item active" data-category="all">
          <i class="fas fa-th"></i>
          <span>Todos los proyectos</span>
        </li>
        <li class="category-item" data-category="existing">
          <i class="fas fa-cogs"></i>
          <span>Proyectos Existentes</span>
        </li>
        <li class="category-item" data-category="new">
          <i class="fas fa-plus-circle"></i>
          <span>Nuevos Proyectos</span>
        </li>
        <li class="category-item" data-category="history">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </li>
        <li class="category-item" data-category="evaluation">
          <i class="fas fa-clipboard-check"></i>
          <span>Proyectos en Evaluación</span>
        </li>
        <li class="category-item" data-category="priority">
          <i class="fas fa-star"></i>
          <span>Proyectos Prioritarios</span>
        </li>
      </ul>
    </aside>
    
    <!-- Panel principal de proyectos -->
    <main class="projects-panel">
      <div class="panel-header">
        <h2 class="panel-title">Proyectos Existentes</h2>
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Buscar proyectos..." id="search-input">
        </div>
      </div>
      
      <div class="filters">
        <div class="filter-item active" data-filter="all">
          <i class="fas fa-filter"></i>
          <span>Todos</span>
        </div>
        <div class="filter-item" data-filter="hardware">
          <i class="fas fa-microchip"></i>
          <span>Hardware</span>
        </div>
        <div class="filter-item" data-filter="software">
          <i class="fas fa-code"></i>
          <span>Software</span>
        </div>
        <div class="filter-item" data-filter="networks">
          <i class="fas fa-network-wired"></i>
          <span>Redes</span>
        </div>
        <div class="filter-item" data-filter="energy">
          <i class="fas fa-bolt"></i>
          <span>Energía</span>
        </div>
      </div>
      
      <div class="projects-grid" id="projects-container">
        <!-- Los proyectos se cargarán dinámicamente con JavaScript -->
      </div>
    </main>
  </div>

  <script>
    // Datos de ejemplo para los proyectos
    const projectsData = [
      {
        id: 1,
        name: "Optimización de Servidores",
        category: "Hardware",
        status: "existing",
        responsible: "Juan Pérez",
        impact: "1200 kg CO₂e",
        investment: "$45,000",
        time: "6 meses",
        metrics: "PUE: 1.35, Consumo: 15,000 kWh",
        priority: "high",
        progress: 100
      },
      {
        id: 2,
        name: "Migración a la Nube",
        category: "Software",
        status: "new",
        responsible: "María García",
        impact: "800 kg CO₂e",
        investment: "$28,500",
        time: "4 meses",
        metrics: "% Virtualización: 75%",
        priority: "high",
        progress: 65
      },
      {
        id: 3,
        name: "Sistema de Refrigeración Eficiente",
        category: "Hardware",
        status: "evaluation",
        responsible: "Carlos López",
        impact: "1800 kg CO₂e",
        investment: "$62,000",
        time: "8 meses",
        metrics: "Reducción temp: 5°C, Ahorro: 25%",
        priority: "medium",
        progress: 20
      },
      {
        id: 4,
        name: "Programa de Reciclaje de Equipos",
        category: "Hardware",
        status: "priority",
        responsible: "Ana Rodríguez",
        impact: "2500 kg CO₂e",
        investment: "$15,000",
        time: "3 meses",
        metrics: "% Reciclaje: 85%",
        priority: "high",
        progress: 40
      },
      {
        id: 5,
        name: "Monitorización de Consumo Energético",
        category: "Software",
        status: "existing",
        responsible: "Pedro Martínez",
        impact: "600 kg CO₂e",
        investment: "$12,500",
        time: "2 meses",
        metrics: "Ahorro detectado: 18%",
        priority: "medium",
        progress: 100
      },
      {
        id: 6,
        name: "Actualización de Routers",
        category: "Networks",
        status: "completed",
        responsible: "Laura Sánchez",
        impact: "400 kg CO₂e",
        investment: "$8,200",
        time: "1 mes",
        metrics: "Eficiencia: +32%",
        priority: "low",
        progress: 100
      }
    ];

    // Cargar nombre de usuario desde localStorage
    document.addEventListener('DOMContentLoaded', function() {
      const username = localStorage.getItem('username') || 'Usuario';
      document.getElementById('username-display').textContent = username;
      
      // Cargar proyectos
      renderProjects(projectsData);
      
      // Inicializar barras de progreso
      setTimeout(initProgressBars, 300);
      
      // Añadir event listeners para filtros
      setupFilters();
    });

    // Función para renderizar proyectos
    function renderProjects(projects) {
      const container = document.getElementById('projects-container');
      container.innerHTML = '';
      
      projects.forEach(project => {
        const statusClass = getStatusClass(project.status);
        const statusText = getStatusText(project.status);
        const priorityClass = `priority-${project.priority}`;
        
        const projectEl = document.createElement('div');
        projectEl.className = 'project-card';
        projectEl.innerHTML = `
          <div class="card-header">
            <h3 class="project-name">${project.name}</h3>
            <span class="project-category">${project.category}</span>
          </div>
          <div class="card-body">
            <div class="project-detail">
              <span class="detail-label">Estado:</span>
              <span class="detail-value"><span class="project-status ${statusClass}">${statusText}</span></span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Responsable:</span>
              <span class="detail-value">${project.responsible}</span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Impacto estimado:</span>
              <span class="detail-value">${project.impact}</span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Inversión:</span>
              <span class="detail-value">${project.investment}</span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Duración:</span>
              <span class="detail-value">${project.time}</span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Métricas clave:</span>
              <span class="detail-value">${project.metrics}</span>
            </div>
            <div class="project-detail">
              <span class="detail-label">Prioridad:</span>
              <span class="detail-value ${priorityClass}">${getPriorityText(project.priority)}</span>
            </div>
            
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${project.progress}%"></div>
            </div>
            <div class="project-detail">
              <span class="detail-label">Avance:</span>
              <span class="detail-value">${project.progress}% completado</span>
            </div>
          </div>
          <div class="card-footer">
            <a href="#" class="view-details">
              <i class="fas fa-eye"></i> Ver detalles
            </a>
            <span class="project-id">#${project.id}</span>
          </div>
        `;
        
        container.appendChild(projectEl);
      });
    }

    // Inicializar barras de progreso con animación
    function initProgressBars() {
      const progressBars = document.querySelectorAll('.progress-fill');
      progressBars.forEach(bar => {
        const width = bar.style.width;
        bar.style.width = '0';
        setTimeout(() => {
          bar.style.width = width;
        }, 100);
      });
    }

    // Configurar filtros y categorías
    function setupFilters() {
      // Filtros de categoría principal
      const categoryItems = document.querySelectorAll('.category-item');
      categoryItems.forEach(item => {
        item.addEventListener('click', function() {
          categoryItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
          
          const category = this.getAttribute('data-category');
          filterProjects(category);
        });
      });
      
      // Filtros de tipo de proyecto
      const filterItems = document.querySelectorAll('.filter-item');
      filterItems.forEach(item => {
        item.addEventListener('click', function() {
          filterItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
          
          const filter = this.getAttribute('data-filter');
          filterProjectsByType(filter);
        });
      });
      
      // Búsqueda
      const searchInput = document.getElementById('search-input');
      searchInput.addEventListener('input', function() {
        searchProjects(this.value);
      });
    }

    // Filtrar proyectos por categoría principal
    function filterProjects(category) {
      let filteredProjects;
      
      if (category === 'all') {
        filteredProjects = projectsData;
      } else {
        filteredProjects = projectsData.filter(project => project.status === category);
      }
      
      renderProjects(filteredProjects);
      setTimeout(initProgressBars, 300);
    }

    // Filtrar proyectos por tipo
    function filterProjectsByType(type) {
      let filteredProjects;
      
      if (type === 'all') {
        filteredProjects = projectsData;
      } else {
        filteredProjects = projectsData.filter(project => 
          project.category.toLowerCase() === type
        );
      }
      
      renderProjects(filteredProjects);
      setTimeout(initProgressBars, 300);
    }

    // Buscar proyectos
    function searchProjects(query) {
      if (!query) {
        renderProjects(projectsData);
        setTimeout(initProgressBars, 300);
        return;
      }
      
      const filteredProjects = projectsData.filter(project => 
        project.name.toLowerCase().includes(query.toLowerCase()) ||
        project.responsible.toLowerCase().includes(query.toLowerCase()) ||
        project.category.toLowerCase().includes(query.toLowerCase())
      );
      
      renderProjects(filteredProjects);
      setTimeout(initProgressBars, 300);
    }

    // Obtener clase CSS para el estado
    function getStatusClass(status) {
      switch(status) {
        case 'existing': return 'status-existing';
        case 'new': return 'status-new';
        case 'evaluation': return 'status-evaluation';
        case 'priority': return 'status-priority';
        case 'completed': return 'status-completed';
        default: return '';
      }
    }

    // Obtener texto para el estado
    function getStatusText(status) {
      switch(status) {
        case 'existing': return 'Existente';
        case 'new': return 'Nuevo';
        case 'evaluation': return 'En Evaluación';
        case 'priority': return 'Prioritario';
        case 'completed': return 'Concluido';
        default: return status;
      }
    }

    // Obtener texto para la prioridad
    function getPriorityText(priority) {
      switch(priority) {
        case 'high': return 'Alta';
        case 'medium': return 'Media';
        case 'low': return 'Baja';
        default: return priority;
      }
    }

    // Cerrar sesión
    function logout() {
      localStorage.removeItem('username');
      window.location.href = 'login.html';
    }
  </script>
</body>
</html>